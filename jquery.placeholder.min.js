/*
 * jQuery Form Placeholder
 *
 * @require jQuery 1.3+
 * @author  Milly (http://d.hatena.ne.jp/MillyC/)
 * @license CC BY-SA (http://creativecommons.org/licenses/by-sa/3.0/)
 */
(function(d,f){var c=d.fn,g=function(){},h="placehold",b=h+"-empty",i=h+"-original-color",a=h+"-password-clone";d.support.placeholder="placeholder" in d("<input/>")[0];var j=c.placehold=function(k){k=d.extend({},j.conf,k);if(k.enabled){j.override()}d.each(d.unique(this.map(function(){return this.elements?d.makeArray(d(this).find(k.elements)):this})),function(){var m=d(this),l=m.data(h);if(l){l.destroy();m.removeData(h)}if(k.enabled){m.data(h,new e(m,d(this.form),k))}});return this};d.extend(j,{conf:{enabled:!d.support.placeholder,elements:":text,:password,textarea",attr:"placeholder",color:"silver",cssClass:"placeholder",message:""},overrides:{val:function(k){if(!arguments.length){if(this.data(b)){return""}return this.val__placehold()}c.val__placehold.call(this,k);return this.each(function(){var l=d(this);d(l.data(a)||[]).triggerHandler("focus."+h);l.triggerHandler("blur."+h)})},val__placehold:c.val},override:function(){c.extend(j.overrides);j.override=g}});function e(v,w,m){var z=this;function q(){v.data(i,v.css("color")).bind("blur."+h,t).bind("focus."+h,y);w.bind("submit."+h,r).bind("reset."+h,n);z.reset()}function k(B){var B=d(B),A=d(d("<b>").append(B.clone()).html().replace(/\stype="?password\b"?/i,' type="text"'));B.hide().attr("disabled","disabled").data(b,true).data(a,A[0]);o(A);return A.data(a,B[0]).bind("focus."+h,x).insertAfter(B)}function p(A){var A=d(A),B=d(A.data(a));A.remove();return B.removeData(a).removeAttr("disabled").show()}function u(A){var B=m.attr&&d(A).attr(m.attr)||m.message||"";return String(B).replace(/[\r\n]/g,"")}function o(A){d(A).data(b,true).val__placehold(u(A)).addClass(m.cssClass||"").css(m.color?{color:m.color}:{})}function s(A){d(A).removeData(b).removeClass(m.cssClass||"").css(m.color?{color:A.data(i)}:{})}function l(C,A,B){if(C&&C.target){setTimeout(function(){((C.isDefaultPrevented()?B:A)||g)()},200)}}function x(B){var A=p(this);l(B,function(){A.focus()})}function y(B){var A=d(this);if(A.data(b)){A.val__placehold("")}s(A)}function t(C){var B=d(this);if(B.val__placehold()){if(!B.data(b)){s(B)}}else{if(B.is(":password")){var A=d(B.data(a)||k(B));l(C,function(){A.blur()})}else{o(B)}}}function r(A){z.clear();l(A,null,function(){z.reset()})}function n(A){l(A,function(){z.reset()})}d.extend(z,{getConf:function(){return m},clear:function(){v.each(y);return z},reset:function(){v.each(t);if(v[0]==document.activeElement){v.focus()}return z},destroy:function(){v.add(w).unbind("."+h);z.clear();v=w=d([]);return z}});q()}})(jQuery);